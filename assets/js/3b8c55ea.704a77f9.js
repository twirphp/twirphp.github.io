"use strict";(self.webpackChunktwirphp_github_io=self.webpackChunktwirphp_github_io||[]).push([[217],{8215:function(e,t,a){var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,r=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:r},t)}},5064:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(7462),r=a(7294),i=a(2389),l=a(9443);var o=function(){var e=(0,r.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},p=a(3039),s=a(6010),u="tabItem_1uMI";function c(e){var t,a,n,i=e.lazy,l=e.block,c=e.defaultValue,d=e.values,m=e.groupId,h=e.className,k=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=d?d:k.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),f=(0,p.lx)(v,(function(e,t){return e.value===t.value}));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===c?c:null!=(t=null!=c?c:null==(a=k.find((function(e){return e.props.default})))?void 0:a.props.value)?t:null==(n=k[0])?void 0:n.props.value;if(null!==g&&!v.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=o(),N=b.tabGroupChoices,w=b.setTabGroupChoices,y=(0,r.useState)(g),T=y[0],x=y[1],P=[],C=(0,p.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var H=N[m];null!=H&&H!==T&&v.some((function(e){return e.value===H}))&&x(H)}var I=function(e){var t=e.currentTarget,a=P.indexOf(t),n=v[a].value;n!==T&&(C(t),x(n),null!=m&&w(m,n))},z=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n=P.indexOf(e.currentTarget)+1;a=P[n]||P[0];break;case"ArrowLeft":var r=P.indexOf(e.currentTarget)-1;a=P[r]||P[P.length-1]}null==(t=a)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":l},h)},v.map((function(e){var t=e.value,a=e.label;return r.createElement("li",{role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,className:(0,s.Z)("tabs__item",u,{"tabs__item--active":T===t}),key:t,ref:function(e){return P.push(e)},onKeyDown:z,onFocus:I,onClick:I},null!=a?a:t)}))),i?(0,r.cloneElement)(k.filter((function(e){return e.props.value===T}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},k.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function d(e){var t=(0,i.Z)();return r.createElement(c,(0,n.Z)({key:String(t)},e))}},9803:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return u},metadata:function(){return c},toc:function(){return d},default:function(){return h}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),l=a(5064),o=a(8215),p=["components"],s={sidebar_position:40},u="Installation",c={unversionedId:"installation",id:"installation",isDocsHomePage:!1,title:"Installation",description:"This is a detailed installation guide for each component and dependency of TwirPHP.",source:"@site/docs/installation.md",sourceDirName:".",slug:"/installation",permalink:"/docs/installation",editUrl:"https://github.com/twirphp/twirphp.github.io/edit/main/docs/installation.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{sidebar_position:40},sidebar:"docs",previous:{title:"Overview",permalink:"/docs/overview"},next:{title:"Protocol Buffers",permalink:"/docs/protocol-buffers"}},d=[{value:"Prerequisites",id:"prerequisites",children:[],level:2},{value:"Protobuf compiler",id:"protobuf-compiler",children:[],level:2},{value:"TwirPHP protoc plugin",id:"twirphp-protoc-plugin",children:[],level:2},{value:"Runtime library",id:"runtime-library",children:[],level:2},{value:"Quickstart PHP dependencies",id:"quickstart-php-dependencies",children:[],level:2},{value:"Protobuf PHP library",id:"protobuf-php-library",children:[],level:2},{value:"HTTP libraries",id:"http-libraries",children:[],level:2}],m={toc:d};function h(e){var t=e.components,a=(0,r.Z)(e,p);return(0,i.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"installation"},"Installation"),(0,i.kt)("p",null,"This is a detailed installation guide for each component and dependency of TwirPHP."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Give ",(0,i.kt)("a",{parentName:"p",href:"https://nixos.org/"},"Nix")," a try and install dependencies in seconds.\nCheck out the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/twirphp/quickstart-demo/blob/main/flake.nix#L18"},"quickstart-demo")," repository for the necessary packages."))),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.php.net/"},"PHP")," (at least 7.3)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://getcomposer.org/"},"Composer"))),(0,i.kt)("h2",{id:"protobuf-compiler"},"Protobuf compiler"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"protoc")," is the compiler for protobuf definitions that generates code for different languages and frameworks."),(0,i.kt)("p",null,"The easiest way to install it is downloading the precompiled binary from the\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/google/protobuf/releases"},"GitHub Releases page"),"."),(0,i.kt)("p",null,"Alternatively, you can install it with your package manager,\nbut be aware that packages in package repos might be outdated:"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"nix",label:"Nix",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"nix-env -iA nixpkgs.protobuf\n"))),(0,i.kt)(o.Z,{value:"nixos",label:"NixOS",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"nix-env -iA nixos.protobuf\n"))),(0,i.kt)(o.Z,{value:"homebrew",label:"Homebrew",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"brew install protobuf\n")))),(0,i.kt)("h2",{id:"twirphp-protoc-plugin"},"TwirPHP protoc plugin"),(0,i.kt)("p",null,"Similarly to ",(0,i.kt)("inlineCode",{parentName:"p"},"protoc"),", the easiest way to install the plugin is downloading the precompiled binary from the\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/twirphp/twirp/releases"},"GitHub Releases page"),"."),(0,i.kt)("p",null,"Alternatively, you can use the following oneliner to download and install the plugin to a custom path:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"curl -Ls https://git.io/twirphp | bash [-b path/to/bin]\n")),(0,i.kt)("p",null,"If you ommit the ",(0,i.kt)("inlineCode",{parentName:"p"},"-b")," option, the plugin will be downloaded to ",(0,i.kt)("inlineCode",{parentName:"p"},"$PWD/bin"),"."),(0,i.kt)("p",null,"Finally, you can try installing the plugin with your package manager:"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"nix",label:"Nix",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"nix-env -iA nixpkgs.protoc-gen-twirp_php\n"))),(0,i.kt)(o.Z,{value:"nixos",label:"NixOS",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"nix-env -iA nixos.protoc-gen-twirp_php\n")))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If the plugin is not installed in PATH, ",(0,i.kt)("inlineCode",{parentName:"p"},"protoc")," has to be invoked differently:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"protoc --plugin=protoc-gen-twirp_php=path/to/protoc-gen-twirp_php ...\n")))),(0,i.kt)("h2",{id:"runtime-library"},"Runtime library"),(0,i.kt)("p",null,"You can install the runtime library using ",(0,i.kt)("a",{parentName:"p",href:"https://getcomposer.org/"},"Composer"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"composer require twirp/twirp\n")),(0,i.kt)("h2",{id:"quickstart-php-dependencies"},"Quickstart PHP dependencies"),(0,i.kt)("p",null,"Choosing the right set of dependencies is not always trivial."),(0,i.kt)("p",null,"If you don't care which HTTP libraries and which protobuf implementation you use,\nyou can just install the following quickstart package:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"composer require twirp/quickstart\n")),(0,i.kt)("p",null,"It will install:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"the pure PHP protobuf library"),(0,i.kt)("li",{parentName:"ul"},"Guzzle HTTP client"),(0,i.kt)("li",{parentName:"ul"},"Guzzle PSR-7")),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"This is not recommended for production!")),(0,i.kt)("p",{parentName:"div"},"Please carefully choose which dependencies you install before going to production."))),(0,i.kt)("h2",{id:"protobuf-php-library"},"Protobuf PHP library"),(0,i.kt)("p",null,"As explained in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/overview#protobuf-in-php"},"Overview"),",\nprotobuf comes with two different runtime implementations."),(0,i.kt)("p",null,"Choose one that fits your needs:"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"pecl",label:"PECL",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"sudo pecl install protobuf-{VERSION}\n"))),(0,i.kt)(o.Z,{value:"composer",label:"Composer",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"composer require google/protobuf\n")))),(0,i.kt)("h2",{id:"http-libraries"},"HTTP libraries"),(0,i.kt)("p",null,"As explained in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/overview#http-standards"},"Overview"),",\nthe TwirPHP runtime library relies on various HTTP standard interfaces."),(0,i.kt)("p",null,"If you do HTTP stuff in your project, chances are that some of them are already installed."),(0,i.kt)("p",null,"You can find packages that implement the relevant interfaces on ",(0,i.kt)("a",{parentName:"p",href:"https://packagist.org/"},"Packagist"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://packagist.org/providers/psr/http-message-implementation"},"PSR-7 implementation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://packagist.org/providers/psr/http-factory-implementation"},"PSR-17 implementation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://packagist.org/providers/psr/http-client-implementation"},"PSR-18 implementation"))),(0,i.kt)("p",null,"An example set of dependencies for server usage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"composer require guzzlehttp/psr7\n")),(0,i.kt)("p",null,"An example set of dependencies for client usage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"composer require guzzlehttp/guzzle guzzlehttp/psr7\n")))}h.isMDXComponent=!0}}]);