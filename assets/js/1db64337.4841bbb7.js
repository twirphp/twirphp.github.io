"use strict";(self.webpackChunktwirphp_github_io=self.webpackChunktwirphp_github_io||[]).push([[372],{6777:function(e,t,i){i.r(t),i.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return u},default:function(){return h}});var n=i(7462),r=i(3366),o=(i(7294),i(3905)),a=["components"],s={sidebar_position:30},l="Overview",p={unversionedId:"overview",id:"overview",isDocsHomePage:!1,title:"Overview",description:"Components",source:"@site/docs/overview.md",sourceDirName:".",slug:"/overview",permalink:"/docs/overview",editUrl:"https://github.com/twirphp/twirphp.github.io/edit/main/docs/overview.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_position:30},sidebar:"docs",previous:{title:"Quickstart",permalink:"/docs/quickstart"},next:{title:"Installation",permalink:"/docs/installation"}},u=[{value:"Components",id:"components",children:[{value:"Code generator",id:"code-generator",children:[],level:3},{value:"Runtime library",id:"runtime-library",children:[],level:3}],level:2},{value:"PHP specifics",id:"php-specifics",children:[{value:"Protobuf in PHP",id:"protobuf-in-php",children:[],level:3},{value:"HTTP standards",id:"http-standards",children:[],level:3}],level:2}],m={toc:u};function h(e){var t=e.components,i=(0,r.Z)(e,a);return(0,o.kt)("wrapper",(0,n.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"overview"},"Overview"),(0,o.kt)("h2",{id:"components"},"Components"),(0,o.kt)("p",null,"Similarly to Twirp, TwirPHP comes with two major components:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"code generator (protoc plugin)"),(0,o.kt)("li",{parentName:"ul"},"runtime library")),(0,o.kt)("h3",{id:"code-generator"},"Code generator"),(0,o.kt)("p",null,"The code generator is responsible for generating:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"some common code used in both servers and clients"),(0,o.kt)("li",{parentName:"ul"},"the server protocol implementation"),(0,o.kt)("li",{parentName:"ul"},"the server interface"),(0,o.kt)("li",{parentName:"ul"},"the client stubs")),(0,o.kt)("p",null,"It's written in Go to make the implementation simpler by using some standard Go protobuf tooling,\nbut it's not much more then a template renderer."),(0,o.kt)("h3",{id:"runtime-library"},"Runtime library"),(0,o.kt)("p",null,"One of the main criticism for gRPC is it's relatively large runtime library.\nBreaking changes in the runtime inevitably cause incompatibility issues between clients and servers\nif they don't upgrade at the same time (which is usually the case).\nWe've seen it happen in gRPC and that's one of the reasons why Twirp (and TwirPHP)\ntook a different approach."),(0,o.kt)("p",null,"Most of the protocol implementation in Twirp (and in TwirPHP) is generated.\nAs a result, the runtime library is a very thin layer with two primary goals:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"ensuring interoperability between different implementations"),(0,o.kt)("li",{parentName:"ul"},"providing tools for common tasks")),(0,o.kt)("p",null,"The interfaces you find in the runtime library make sure that you can code against the same types across all implementations."),(0,o.kt)("p",null,"Besides the necessary interfaces, the TwirPHP runtime library comes with a simple routing implementation for the server side\n(easily replaceable by alternative implementations, most of the protocol implementation is still generated)\nand a couple helpers for server hooks and error handling."),(0,o.kt)("p",null,"The interfaces are essential to ensure interoperability, but the rest is absolutely optional,\nyou're welcome bring your own implementation."),(0,o.kt)("h2",{id:"php-specifics"},"PHP specifics"),(0,o.kt)("h3",{id:"protobuf-in-php"},"Protobuf in PHP"),(0,o.kt)("p",null,"Protobuf at its core is language agnostic and it ships with not one, but twoofficial PHP implementations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"native C extension"),(0,o.kt)("li",{parentName:"ul"},"pure PHP implementation")),(0,o.kt)("p",null,"The C extension is said to provide better performance, but the PHP implementation might have wider platform support."),(0,o.kt)("p",null,"The examples throughout this site use the PHP implementation for portability reasons,\nbut that doesn't mean it's the right choice for every use case."),(0,o.kt)("p",null,"Please read the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/protocolbuffers/protobuf/tree/master/php"},"protobuf documentation for PHP"),",\nlearn about ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/protocolbuffers/protobuf/tree/master/php#known-issues"},"known issues"),"\nand decide which implementation to use based on your use cases."),(0,o.kt)("p",null,"TwirPHP works with both implementations equally well."),(0,o.kt)("h3",{id:"http-standards"},"HTTP standards"),(0,o.kt)("p",null,"The PHP community has spent quite a bit of time on creating HTTP related standards.\nTwirPHP relies on these standards to make itself agnostic of the implementations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://www.php-fig.org/psr/psr-7/"},"PSR-7")," (HTTP Message)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://www.php-fig.org/psr/psr-15/"},"PSR-15")," (HTTP Server Request Handler)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://www.php-fig.org/psr/psr-17/"},"PSR-17")," (HTTP Factory)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://www.php-fig.org/psr/psr-18/"},"PSR-18")," (HTTP Client)")),(0,o.kt)("p",null,"Choosing the right implementations for your project is up to you.\nIf you do HTTP stuff in your project, chances are that some of them are already installed."))}h.isMDXComponent=!0}}]);